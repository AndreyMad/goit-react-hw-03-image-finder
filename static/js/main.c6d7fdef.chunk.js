(this["webpackJsonpgoit-react-hw-01-components"]=this["webpackJsonpgoit-react-hw-01-components"]||[]).push([[0],{10:function(e,t,a){e.exports={Overlay:"Modal_Overlay__1oqrg",Modal:"Modal_Modal__35QDs"}},24:function(e,t,a){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__1JqD4",ImageGalleryItem_image:"ImageGalleryItem_ImageGalleryItem_image__3NYbC"}},25:function(e,t,a){e.exports={ImageGallery:"ImageGallery_ImageGallery__12rDd"}},26:function(e,t,a){e.exports={Button:"Button_Button__1_2o8"}},27:function(e,t,a){e.exports=a(73)},32:function(e,t,a){},73:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(21),l=a.n(r),c=(a(32),a(11)),i=a(3),s=a(4),m=a(6),u=a(5),d=a(7),h=(a(33),a(22)),p=a.n(h),f=a(9),_=a.n(f),b=function(){return o.a.createElement("div",{className:_.a.Overlay},o.a.createElement("div",{className:_.a.loader_wrapper},o.a.createElement(p.a,{type:"ThreeDots",color:"white",zIndex:1e4,height:100,width:100}),";"))},g=a(23),y=a.n(g),v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return y.a.get("https://pixabay.com/api/?key=14922494-aee89178795b078ccc72cd443&orientation=horizontal&q=".concat(e,"&per_page=12&page=").concat(t))},S=a(8),E=a.n(S),O=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={inputValue:""},a.handleChange=function(e){a.setState({inputValue:e.target.value})},a.handleSubmit=function(e){e.preventDefault(),(0,a.props.onSubmit)(a.state.inputValue),a.setState({inputValue:""})},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.inputValue;return o.a.createElement(o.a.Fragment,null,o.a.createElement("header",{className:E.a.Searchbar},o.a.createElement("form",{className:E.a.SearchForm,onSubmit:this.handleSubmit},o.a.createElement("button",{type:"submit",className:E.a.SearchForm_button},o.a.createElement("span",{className:E.a.SearchForm_button_label},"Search")),o.a.createElement("input",{className:E.a.SearchForm_input,onChange:this.handleChange,value:e,type:"text",autoComplete:"off",placeholder:"Search images and photos"}))))}}]),t}(n.Component),w=a(24),I=a.n(w),M=function(e){var t=e.item,a=e.openModal;return o.a.createElement("img",{className:I.a.ImageGalleryItem_image,id:t.id,src:t.webformatURL,alt:t.tags,onClick:a,role:"presentation"})},j=a(25),k=a.n(j),N=function(e){var t=e.items,a=e.openModal;return o.a.createElement("ul",{className:k.a.ImageGallery},t.map((function(e){return o.a.createElement("li",{key:e.id},o.a.createElement(M,{item:e,openModal:a}))})))},F=a(26),L=a.n(F),C=function(e){var t=e.loadMore;return o.a.createElement("button",{type:"button",onClick:t,className:L.a.Button},"Load more")},G=a(10),x=a.n(G),U=function(e){function t(){return Object(i.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.closeModal;window.addEventListener("keydown",e),document.body.style=" overflow: hidden "}},{key:"componentWillUnmount",value:function(){var e=this.props.closeModal;window.removeEventListener("keydown",e),document.body.style=""}},{key:"render",value:function(){var e=this.props,t=e.closeModal,a=e.modalItemUrl;return o.a.createElement("div",{className:x.a.Overlay,onClick:t,onKeyDown:t,role:"presentation"},o.a.createElement("div",{className:x.a.Modal},o.a.createElement("img",{src:a,alt:"",role:"presentation"})))}}]),t}(n.Component),D=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={items:[],searchQuery:"",isLoad:!1,showModal:!1,modalItemUrl:"",page:1},a.onSubmit=function(e){a.setState({isLoad:!0,searchQuery:e},a.getRequest(e))},a.getRequest=function(e){v(e).then((function(e){return a.setState({items:e.data.hits})})).catch((function(e){throw new Error(e)})).finally((function(){a.setState({isLoad:!1})}))},a.loadMore=function(){var e=a.state,t=e.searchQuery,n=e.page;a.setState((function(e){return{page:e.page+1}})),v(t,n).then((function(e){a.setState((function(t){return{items:[].concat(Object(c.a)(t.items),Object(c.a)(e.data.hits))}}))})).then()},a.openModal=function(e){var t=e.target;a.loaderOn();var n=a.state.items.find((function(e){return e.id===Number(t.id)})).largeImageURL;a.setState({showModal:!0,modalItemUrl:n})},a.closeModal=function(e){("Escape"===e.code||e.target.className.includes("Overlay"))&&(a.setState({showModal:!1,modalItemUrl:""}),a.loaderOff())},a.loaderOn=function(){a.setState({isLoad:!0})},a.loaderOff=function(){a.setState({isLoad:!1})},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(e,t){var a=this.state.items;t.items!==a&&window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}},{key:"render",value:function(){var e=this.state,t=e.showModal,a=e.modalItemUrl,n=e.items,r=e.isLoad;return o.a.createElement(o.a.Fragment,null,r&&o.a.createElement(b,null),o.a.createElement(O,{onSubmit:this.onSubmit}),o.a.createElement(N,{items:n,openModal:this.openModal}),n.length>0&&o.a.createElement(C,{loadMore:this.loadMore}),t&&o.a.createElement(U,{modalItemUrl:a,loaderOff:this.loaderOff,closeModal:this.closeModal}))}}]),t}(n.Component);l.a.render(o.a.createElement(D,null),document.getElementById("root"))},8:function(e,t,a){e.exports={Searchbar:"Searchbar_Searchbar__1zlco",SearchForm:"Searchbar_SearchForm__3wW6d",SearchForm_button:"Searchbar_SearchForm_button__9cRcg",SearchForm_button_label:"Searchbar_SearchForm_button_label__1PSTI",SearchForm_input:"Searchbar_SearchForm_input__I6tQh"}},9:function(e,t,a){e.exports={loader_wrapper:"Loader_loader_wrapper__1Wa8m",Overlay:"Loader_Overlay__2r74Z"}}},[[27,1,2]]]);
//# sourceMappingURL=main.c6d7fdef.chunk.js.map